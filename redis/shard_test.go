package redis

import (
	"fmt"
)

func ExampleRedisSliceShard() {
	sliceShard := NewRedisSliceShard([]RedisNodeOpt{{Addr: "127.0.0.1:6379"}}, MurmurHash32_Nginx)
	client := sliceShard.GetS("")
	set := client.Set("go", "Go")
	if set.Err() != nil {
		fmt.Println("set:", set.Err())
	}
	get := client.Get("go")
	if get.Err() != nil {
		fmt.Println("get:", get.Err())
	}
	fmt.Println(get.Val())
	client.Set("goi", "0")
	incr := client.Incr("goi")
	fmt.Println(incr.Val())
	incr = client.Incr("goi")
	fmt.Println(incr.Val())
	client.Close()
	// Output:
	// Go
	// 1
	// 2
}

func ExampleJRedisShard() {
	jedisShard := NewJedisShard([]RedisNodeOpt{{Addr: "127.0.0.1:6379", ShardName: "dd"}, {Addr: "127.0.0.1:6380"}}).(*jedisShard)
	clients := jedisShard.clients
	tree := jedisShard.tree
	fmt.Printf("clients:%d\n", len(clients))
	fmt.Printf("tree:%d\n", tree.Len())
	for i := 0; i < 99; i++ {
		key := fmt.Sprintf("i%d", i)
		cid := jedisShard.get([]byte(key))
		fmt.Printf("%v\n", cid.nodeOpt.Addr)
	}
	// Output:
	// clients:2
	// tree:320
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6379
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6380
	// 127.0.0.1:6379
}
